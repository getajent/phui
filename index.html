<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Hoarders</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- CRT screen effect overlays -->
    <div class="crt-overlay"></div>
    <div class="scanlines"></div>
    <div class="noise"></div>
    <div class="flicker"></div>
    
    <div class="game-ui">
        <!-- Low Health Overlay -->
        <div class="low-health-overlay"></div>
        
        <!-- Draggable Element -->
        <div class="draggable-container">
            <div class="draggable-element" id="draggableElement">
                <div class="drag-scratches"></div>
                <i class="fa-solid fa-satellite-dish"></i>
                <span class="drag-label">SIGNAL</span>
            </div>
        </div>
        
        <!-- Drag Hint -->
        <div class="drag-hint" id="dragHint">
            <div class="scan-line"></div>
            <div class="warning-icon">
                <i class="fa-solid fa-bolt"></i>
            </div>
            <div class="hint-content" id="dragInitialContent">
                <div class="hint-icon">
                    <i class="fa-solid fa-hand-fist"></i>
                </div>
                <div class="hint-text-container">
                    <div class="hint-text">CLICK AND DRAG</div>
                    <div class="hint-subtext">SPATIAL ANOMALY DETECTED</div>
                </div>
            </div>
            <div class="hint-content" id="dragActiveContent" style="display: none;">
                <div class="hint-icon">
                    <i class="fa-solid fa-hand"></i>
                </div>
                <div class="hint-text-container">
                    <div class="hint-text">RELEASE TO DROP</div>
                    <div class="hint-subtext">ANOMALY REPOSITIONING</div>
                </div>
            </div>
            <div class="corner-decoration"></div>
            <div class="hint-warning-label">CAUTION: UNSTABLE</div>
            <div class="corner-element top-left"></div>
            <div class="corner-element top-right"></div>
            <div class="corner-element bottom-left"></div>
            <div class="corner-element bottom-right"></div>
        </div>
        
        <!-- Health/Stamina Bars -->
        <div class="top-left">
            <div class="vitals-container">
                <div class="vital-bar-container">
                    <i class="fa-solid fa-heart icon-vital health-icon"></i>
                    <div class="vital-bar health-bar">
                        <div class="vital-fill health-fill">
                            <div class="vital-pulse"></div>
                        </div>
                    </div>
                </div>
                <div class="vital-bar-container">
                    <i class="fa-solid fa-running icon-vital stamina-icon"></i>
                    <div class="vital-bar stamina-bar">
                        <div class="vital-fill stamina-fill">
                            <div class="vital-pulse"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Time Display - Made to look broken -->
        <div class="time-display">
            <div class="time-container broken">
                <i class="fa-regular fa-clock time-icon"></i>
                <div class="time-wrapper">
                    <span id="game-time">13:45</span>
                    <span class="time-period">PM</span>
                </div>
            </div>
            <!-- Total Monster Cost Display -->
            <div class="total-cost-container">
                <i class="fa-solid fa-dragon cost-icon"></i>
                <div class="cost-wrapper">
                    <span id="total-monster-cost">999</span>
                    <span class="cost-currency">$</span>
                </div>
            </div>
        </div>

        <!-- Mission Directive Panel (Previously Objectives) -->
        <div class="objectives-container">
            <div class="objectives-hint">
                <i class="fa-solid fa-list-check"></i>
                <span>DIRECTIVE</span>
                <div class="key-hint">TAB</div>
                <div class="notification-dot"></div>
            </div>
            <div id="objectives-panel" class="objectives-panel">
                <div class="objectives-header">
                    <span data-text="MANDATORY TASK LIST">MANDATORY TASK LIST</span>
                    <div class="objectives-counter">1/3</div>
                </div>
                <div class="objective">
                    <div class="objective-icon-container">
                        <i class="fa-solid fa-location-dot icon-objective"></i>
                    </div>
                    <div class="objective-content">
                        <div class="objective-text">DESCENT INTO MADNESS</div>
                        <div class="objective-subtext">Locate the maintenance tunnels (or become one with the walls)</div>
                        <div class="progress-indicator">
                            <div class="progress-track"></div>
                            <div class="progress-fill" style="width: 30%"></div>
                        </div>
                    </div>
                </div>
                <div class="objective">
                    <div class="objective-icon-container">
                        <i class="fa-solid fa-location-dot icon-objective"></i>
                    </div>
                    <div class="objective-content">
                        <div class="objective-text">RESOURCE EXTRACTION</div>
                        <div class="objective-subtext">Harvest alien flora samples <span class="progress-counter">[0/3]</span> (Your suffering is tax-deductible)</div>
                        <div class="progress-indicator">
                            <div class="progress-track"></div>
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="objective completed">
                    <div class="objective-icon-container">
                        <i class="fa-solid fa-check icon-objective"></i>
                    </div>
                    <div class="objective-content">
                        <div class="objective-text">SIGNAL INVESTIGATION</div>
                        <div class="objective-subtext">Trace the source of the distress signal (Your screams will be analyzed for research)</div>
                        <div class="progress-indicator">
                            <div class="progress-track"></div>
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
                <div class="objective-footer">
                    <div class="scan-line"></div>
                    <div class="connection-status">CONNECTION TO HR ESTABLISHED â€¢ YOUR PAIN IS BEING MONITORED</div>
                </div>
            </div>
        </div>

        <!-- Equipment Bar -->
        <div class="equipment-bar">
            <div class="equipment-slot flashlight-slot off" data-slot="1">
                <div class="slot-content">
                    <i class="fa-solid fa-lightbulb icon-main"></i>
                    <div class="battery-indicator">
                        <div class="battery-fill"></div>
                    </div>
                    <div class="status-indicator flashlight-status"></div>
                </div>
            </div>
            <div class="equipment-slot empty-slot error" data-slot="2">
                <div class="slot-content">
                    <div class="error-text">ERROR</div>
                    <div class="warning-tape"></div>
                </div>
            </div>
            <div class="equipment-slot firstaid-slot" data-slot="3">
                <div class="slot-content">
                    <i class="fa-solid fa-first-aid icon-main"></i>
                    <div class="scratches"></div>
                </div>
            </div>
            <div class="equipment-slot monster-slot" data-slot="4" data-cost="999">
                <div class="slot-content">
                    <i class="fa-solid fa-dragon icon-main"></i>
                    <div class="monster-cost">999$</div>
                </div>
            </div>
            <div class="equipment-slot radio-slot off" data-slot="5">
                <div class="slot-content">
                    <i class="fa-solid fa-walkie-talkie icon-main"></i>
                    <div class="battery-indicator radio-battery">
                        <div class="battery-fill radio-battery-fill"></div>
                    </div>
                    <div class="status-indicator radio-status"></div>
                </div>
            </div>
        </div>

        <!-- Flashlight Beam Effect -->
        <div class="flashlight-beam"></div>

        <!-- Radio Transmission Effect -->
        <div class="radio-transmission"></div>
        
        <!-- Teammate Health Status -->
        <div class="teammate-status" id="teammateStatus">
            <div class="scan-line"></div>
            <div class="status-header">
                <span class="comrade-id">EMPLOYEE #4815</span>
                <span class="connection-quality">[BANDWIDTH RESTRICTED]</span>
            </div>
            <div class="teammate-vitals">
                <div class="mate-health-bar">
                    <div class="mate-health-fill" style="width: 35%;">
                        <div class="health-pulse"></div>
                    </div>
                </div>
                <div class="vital-labels">
                    <div class="vital-label">CRITICAL</div>
                    <div class="vital-value">35%</div>
                </div>
            </div>
            <div class="heal-hint">
                <div class="key-button small">F</div>
                <span>APPLY CORPORATE HEALTHCARE</span>
            </div>
            <div class="status-message">"Productivity levels decreasing... need assistance."</div>
            <div class="corner-element top-left"></div>
            <div class="corner-element top-right"></div>
            <div class="corner-element bottom-left"></div>
            <div class="corner-element bottom-right"></div>
        </div>
        
        <!-- Regular Interaction Hint -->
        <div class="interaction-hint" id="regularInteraction">
            <div class="scan-line"></div>
            <div class="object-name">
                <span class="name-text" data-text="Capsule">Capsule</span>
                <span class="object-status">Nothing to place</span>
            </div>
            <div class="interaction-container">
                <div class="key-button">E</div>
                <div class="interaction-text">Interact</div>
            </div>
        </div>
        
        <!-- Hold Interaction Hint -->
        <div class="interaction-hint" id="holdInteraction">
            <div class="scan-line"></div>
            <div class="object-name">
                <span class="name-text" data-text="Capsule">Capsule</span>
                <span class="object-status">Nothing to place</span>
            </div>
            <div class="interaction-container">
                <div class="key-button">
                    <div class="hold-inner">
                        <span>E</span>
                        <div class="hold-progress"></div>
                    </div>
                </div>
                <div class="interaction-text">Hold</div>
            </div>
        </div>
        
        <!-- Button Hints Panel -->
        <div class="button-hints">
            <div class="hints-header">
                <div class="hints-title">CONTROLS GUIDE</div>
                <div class="hints-toggle">H</div>
            </div>
            <div class="hints-description">
                Navigation and interaction with survival system
            </div>
            <div class="hints-content">
                <!-- Movement & Core Controls -->
                <div class="hint-divider">Basic Controls</div>
                <div class="hint-item" data-action="move">
                    <div class="key-button small">WASD</div>
                    <span>Move</span>
                </div>
                <div class="hint-item" data-action="sprint">
                    <div class="key-button small">SHIFT</div>
                    <span>Sprint</span>
                </div>
                <div class="hint-item" data-action="interact">
                    <div class="key-button small">E</div>
                    <span>Interact</span>
                </div>
                <div class="hint-item" data-action="hold-interact">
                    <div class="key-button small">Hold E</div>
                    <span>Hold</span>
                </div>
                
                <!-- Equipment Controls -->
                <div class="hint-divider">Equipment</div>
                <div class="hint-item" data-action="select-slot">
                    <div class="key-button small">1-5</div>
                    <span>Select Item</span>
                </div>
                <div class="hint-item" data-action="toggle-flashlight">
                    <div class="key-button small">L</div>
                    <span>Toggle Flashlight</span>
                </div>
                <div class="hint-item" data-action="toggle-radio">
                    <div class="key-button small">R</div>
                    <span>Toggle Radio</span>
                </div>
                <div class="hint-item" data-action="charge-device">
                    <div class="key-button small">C</div>
                    <span>Charge Battery</span>
                </div>
                <div class="hint-item" data-action="use-firstaid">
                    <div class="key-button small">F</div>
                    <span>First Aid Kit</span>
                </div>
                <div class="hint-item" data-action="select-monster">
                    <div class="key-button small">M</div>
                    <span>Monster</span>
                </div>
                
                <!-- Interface Controls -->
                <div class="hint-divider">Interface</div>
                <div class="hint-item" data-action="objectives">
                    <div class="key-button small">TAB</div>
                    <span>Directive (tasks)</span>
                </div>
                <div class="hint-item" data-action="toggle-interaction">
                    <div class="key-button small">I</div>
                    <span>Toggle Interaction</span>
                </div>
                <div class="hint-item" data-action="controls">
                    <div class="key-button small">H</div>
                    <span>Show Controls</span>
                </div>
                <div class="hint-item" data-action="death-screen">
                    <div class="key-button small">D</div>
                    <span>Simulate Death</span>
                </div>
                <div class="hint-item" data-action="esc-menu">
                    <div class="key-button small">ESC</div>
                    <span>System Access</span>
                </div>
            </div>
        </div>
        
        <!-- Press H for Controls Hint -->
        <div class="press-h-hint">
            Press <span class="key-highlight">H</span> for controls
        </div>
    </div>
    
    <!-- Death Screen -->
    <div id="deathScreen" class="death-screen">
        <div class="death-content">
            <div class="death-header">
                <h1 class="glitch-text" data-text="SYSTEMS OFFLINE">SYSTEMS OFFLINE</h1>
                <h2 data-binary="01000100 01000101 01000001 01000100">MISSION STATUS: <span class="text-danger">CATASTROPHIC FAILURE</span> <span class="binary-code">01000100 01000101 01000001 01000100</span></h2>
            </div>
            
            <div class="death-stats">
                <div class="death-stat">
                    <div class="stat-label">SURVIVAL TIME</div>
                    <div class="stat-value" id="survivalTime">48 min 27 sec</div>
                </div>
                <div class="death-stat">
                    <div class="stat-label">SYSTEM STATUS</div>
                    <div class="stat-value">Observer mode active</div>
                </div>
                <div class="death-stat">
                    <div class="stat-label">DEATH RATING</div>
                    <div class="stat-value">D- (Extremely preventable)</div>
                </div>
            </div>
            
            <div class="death-message-container">
                <div class="death-cause">
                    <h3>CAUSE OF DEATH</h3>
                    <p id="deathCause">Violation of company dress code (spacesuit breach)</p>
                </div>
                <div class="death-analysis">
                    <h3>ONBOARD COMPUTER ANALYSIS</h3>
                    <p id="deathAnalysis">This failure will be noted in your permanent record.</p>
                </div>
            </div>
            
            <button id="restartButton" class="restart-button">
                <div class="button-glow"></div>
                <span class="button-text">OBSERVE</span>
            </button>
            
            <div class="death-decoration">
                <div class="skull-icon">â˜ </div>
                <div class="system-failure">SYSTEM FAILURE</div>
            </div>
        </div>
    </div>

    <!-- ESC Menu -->
    <div id="escMenu" class="esc-menu">
        <div class="menu-content">
            <div class="menu-header">
                <div class="scan-line"></div>
                <h1 class="menu-title" data-text="SYSTEM ACCESS">SYSTEM ACCESS</h1>
                <div class="menu-subtitle">EMPLOYEE PORTAL v2.4.1</div>
                <div class="menu-warning">UNAUTHORIZED ACCESS WILL BE TERMINATED</div>
                <div class="corner-element top-left"></div>
                <div class="corner-element top-right"></div>
            </div>
            
            <div class="menu-tabs">
                <div class="menu-tab active" data-tab="personnel">PERSONNEL</div>
                <div class="menu-tab" data-tab="settings">SETTINGS</div>
            </div>
            
            <div class="tab-content active" id="personnelTab">
                <div class="menu-section-header">
                    <span>EMPLOYEE DIRECTORY</span>
                    <div class="section-line"></div>
                </div>
                
                <!-- Host ID Section -->
                <div class="server-id-section">
                    <div class="host-id-container">
                        <div class="host-id-label">EXPEDITION DOOM CODE:</div>
                        <div class="host-id-value" id="hostDoomCode">#887766E</div>
                        <button class="copy-id-btn" id="copyHostId" title="Copy to clipboard">
                            <i class="fa-solid fa-copy"></i>
                        </button>
                    </div>
                    <div class="host-id-status">SIGNAL STABLE â€¢ <span class="uptime">UPTIME: 01:23:45</span></div>
                </div>
                
                <div class="player-list">
                    <!-- Host player (you) -->
                    <div class="player-item host">
                        <div class="player-status active"></div>
                        <div class="player-name">
                            <span class="name-text">YOU [HOST]</span>
                            <span class="id-text">ID#4815</span>
                        </div>
                        <div class="player-role">SUPERVISOR</div>
                        <div class="player-controls">
                            <div class="control-label">OUTPUT</div>
                            <div class="microphone-icon active">
                                <i class="fa-solid fa-microphone"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Other players -->
                    <div class="player-item">
                        <div class="player-status active"></div>
                        <div class="player-name">
                            <span class="name-text">SMITH, J.</span>
                            <span class="id-text">ID#1623</span>
                        </div>
                        <div class="player-role">TECHNICIAN</div>
                        <div class="player-controls">
                            <div class="control-label">VOLUME</div>
                            <div class="volume-slider-container">
                                <input type="range" class="volume-slider" min="0" max="100" value="75">
                                <div class="volume-track">
                                    <div class="volume-fill" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="microphone-icon active">
                                <i class="fa-solid fa-volume-high"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-item">
                        <div class="player-status active"></div>
                        <div class="player-name">
                            <span class="name-text">PETERSON, A.</span>
                            <span class="id-text">ID#4421</span>
                        </div>
                        <div class="player-role">SECURITY</div>
                        <div class="player-controls">
                            <div class="control-label">VOLUME</div>
                            <div class="volume-slider-container">
                                <input type="range" class="volume-slider" min="0" max="100" value="60">
                                <div class="volume-track">
                                    <div class="volume-fill" style="width: 60%"></div>
                                </div>
                            </div>
                            <div class="microphone-icon active">
                                <i class="fa-solid fa-volume-high"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-item">
                        <div class="player-status disconnected"></div>
                        <div class="player-name">
                            <span class="name-text">RODRIGUEZ, M.</span>
                            <span class="id-text">ID#8890</span>
                        </div>
                        <div class="player-role">MISSING</div>
                        <div class="player-controls">
                            <div class="control-label">SIGNAL LOST</div>
                            <div class="microphone-icon disabled">
                                <i class="fa-solid fa-volume-slash"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-footer">
                    <div class="personnel-note">NOTE: Muting coworkers violates Company Policy #472-B</div>
                    <div class="corporate-message">"Communication is mandatory until termination"</div>
                </div>
            </div>
            
            <div class="tab-content" id="settingsTab">
                <div class="menu-section-header">
                    <span>URGENT SYSTEM CONFIGURATION</span>
                    <div class="section-line"></div>
                </div>
                
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-name">OXYGEN EFFICIENCY</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">-43%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">EMPLOYEE REDUNDANCY</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">HIGH</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">ORGAN DONATION</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">MANDATORY</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">REALITY STABILIZER</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator"></div>
                                </div>
                                <div class="toggle-value">OFF</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">SUFFERING LEVEL</div>
                        <div class="setting-control">
                            <div class="toggle-value">IMMENSE</div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">SCREAMS VOLUME</div>
                        <div class="setting-control">
                            <div class="toggle-value">87dB</div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">NIGHTMARE MODE</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">ALWAYS</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">MEMORY WIPES</div>
                        <div class="setting-control">
                            <div class="toggle-value">BI-WEEKLY</div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">EXISTENTIAL DREAD</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">MAX</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">EMPLOYEE HAPPINESS</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator"></div>
                                </div>
                                <div class="toggle-value">PROHIBITED</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">WALL EYES</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator active"></div>
                                </div>
                                <div class="toggle-value">WATCHING</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">DENTAL PLAN</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator"></div>
                                </div>
                                <div class="toggle-value">UNAVAILABLE</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">PRODUCTIVITY MINIMUM</div>
                        <div class="setting-control">
                            <div class="toggle-value">142%</div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">BATHROOM BREAKS</div>
                        <div class="setting-control">
                            <div class="toggle-value">QUARTERLY</div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-name">PHYSICS STABILITY</div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <div class="toggle-track">
                                    <div class="toggle-indicator"></div>
                                </div>
                                <div class="toggle-value">UNRELIABLE</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-footer">
                    <div class="personnel-note">NOTE: These settings cannot be changed without approval from Corporate</div>
                    <div class="corporate-message">"Optimal misery promotes quarterly growth"</div>
                </div>
            </div>
            
            <div class="menu-actions">
                <div class="menu-button" id="resumeButton">
                    <div class="key-button small">ESC</div>
                    <span>RETURN TO WORK</span>
                </div>
                <div class="menu-button" id="optionsButton">
                    <span>FULL SYSTEM OPTIONS</span>
                </div>
                <div class="menu-button" id="logoutButton" onclick="window.location.href='main-menu.html'">
                    <span>VOLUNTARY TERMINATION</span>
                </div>
            </div>
            
            <div class="corner-element bottom-left"></div>
            <div class="corner-element bottom-right"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Host ID copy functionality
        document.getElementById('copyHostId').addEventListener('click', function() {
            const hostId = document.getElementById('hostDoomCode').textContent;
            navigator.clipboard.writeText(hostId).then(function() {
                // Show copy success feedback
                const copyBtn = document.getElementById('copyHostId');
                const originalHTML = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fa-solid fa-check"></i>';
                copyBtn.style.backgroundColor = 'rgba(77, 110, 80, 0.5)';
                
                setTimeout(function() {
                    copyBtn.innerHTML = originalHTML;
                    copyBtn.style.backgroundColor = '';
                }, 1000);
                
                // Add a notification
                showNotification('Doom Code copied to clipboard. Spread the suffering.', 'info');
            });
        });
        
        // Generate a random Doom Code if not already set
        function generateDoomCode() {
            const joinedServerCode = localStorage.getItem('joinedServerCode');
            const storedDoomCode = localStorage.getItem('hostDoomCode');
            const hostDoomCodeElement = document.getElementById('hostDoomCode');
            
            // Check if joining someone else's server
            if (joinedServerCode) {
                hostDoomCodeElement.textContent = joinedServerCode;
                const statusElement = document.querySelector('.host-id-status');
                statusElement.innerHTML = 'CONNECTED TO EXTERNAL SIGNAL â€¢ <span class="uptime">UPTIME: 01:23:45</span>';
                statusElement.style.color = '#a23430';
                
                // Set the player role to "SUBORDINATE" instead of "SUPERVISOR"
                const playerRole = document.querySelector('.player-role');
                if (playerRole.textContent === 'SUPERVISOR') {
                    playerRole.textContent = 'SUBORDINATE';
                    
                    // Update player display to show as non-host
                    const playerItem = document.querySelector('.player-item.host');
                    playerItem.classList.remove('host');
                    const nameText = playerItem.querySelector('.name-text');
                    nameText.textContent = 'YOU [CONNECTED]';
                }
                
                // Clear the joined server code to avoid confusion on refresh
                localStorage.removeItem('joinedServerCode');
                return;
            }
            
            // Generate a new code or use stored one
            if (storedDoomCode) {
                hostDoomCodeElement.textContent = storedDoomCode;
            } else {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let doomCode = '#';
                for (let i = 0; i < 7; i++) {
                    doomCode += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                hostDoomCodeElement.textContent = doomCode;
                localStorage.setItem('hostDoomCode', doomCode);
            }
        }
        
        // Simple notification system
        function showNotification(message, type = 'info') {
            const notificationContainer = document.querySelector('.game-ui');
            const notification = document.createElement('div');
            notification.className = 'system-notification ' + type;
            notification.innerHTML = `
                <div class="notification-icon"><i class="fa-solid fa-${type === 'info' ? 'info' : 'warning'}"></i></div>
                <div class="notification-message">${message}</div>
            `;
            
            notificationContainer.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notificationContainer.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Update uptime counter
        function updateUptime() {
            const startTime = localStorage.getItem('sessionStartTime') || Date.now().toString();
            if (!localStorage.getItem('sessionStartTime')) {
                localStorage.setItem('sessionStartTime', startTime);
            }
            
            const uptimeElement = document.querySelector('.uptime');
            const elapsedSeconds = Math.floor((Date.now() - parseInt(startTime)) / 1000);
            const hours = Math.floor(elapsedSeconds / 3600).toString().padStart(2, '0');
            const minutes = Math.floor((elapsedSeconds % 3600) / 60).toString().padStart(2, '0');
            const seconds = (elapsedSeconds % 60).toString().padStart(2, '0');
            
            uptimeElement.textContent = `UPTIME: ${hours}:${minutes}:${seconds}`;
        }
        
        // Add terminal shortcut (T key)
        document.addEventListener('keydown', function(event) {
            // Check if T key is pressed and no input element is focused
            if (event.key === 't' || event.key === 'T') {
                const activeElement = document.activeElement;
                const isInputFocused = activeElement.tagName === 'INPUT' || 
                                      activeElement.tagName === 'TEXTAREA' || 
                                      activeElement.isContentEditable;
                
                if (!isInputFocused) {
                    // Show notification before navigating
                    showNotification('Accessing terminal system...', 'info');
                    
                    // Navigate to terminal.html after a brief delay
                    setTimeout(() => {
                        window.location.href = 'terminal.html';
                    }, 500);
                }
            }
            
            // Check if B key is pressed for loading screen shortcut
            if (event.key === 'b' || event.key === 'B') {
                const activeElement = document.activeElement;
                const isInputFocused = activeElement.tagName === 'INPUT' || 
                                      activeElement.tagName === 'TEXTAREA' || 
                                      activeElement.isContentEditable;
                
                if (!isInputFocused) {
                    // Show notification before navigating
                    showNotification('Initiating loading sequence...', 'info');
                    
                    // Navigate to loading.html after a brief delay
                    setTimeout(() => {
                        window.location.href = 'loading.html';
                    }, 500);
                }
            }
        });
        
        // Initialize the Doom Code and uptime
        document.addEventListener('DOMContentLoaded', function() {
            generateDoomCode();
            updateUptime();
            setInterval(updateUptime, 1000);
            
            // Add hints about terminal access and loading screen
            const controlsHints = document.querySelector('.hints-content');
            if (controlsHints) {
                const interfaceControls = Array.from(controlsHints.querySelectorAll('.hint-divider')).find(div => div.textContent === 'Interface');
                if (interfaceControls) {
                    // Add terminal hint
                    const terminalHint = document.createElement('div');
                    terminalHint.className = 'hint-item';
                    terminalHint.dataset.action = 'terminal';
                    terminalHint.innerHTML = `
                        <div class="key-button small">T</div>
                        <span>Open Terminal</span>
                    `;
                    interfaceControls.parentNode.insertBefore(terminalHint, interfaceControls.nextSibling);
                    
                    // Add loading screen hint
                    const loadingHint = document.createElement('div');
                    loadingHint.className = 'hint-item';
                    loadingHint.dataset.action = 'loading';
                    loadingHint.innerHTML = `
                        <div class="key-button small">B</div>
                        <span>Boot Sequence</span>
                    `;
                    interfaceControls.parentNode.insertBefore(loadingHint, interfaceControls.nextSibling);
                }
            }
        });
    </script>
</body>
</html>
